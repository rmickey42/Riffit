<main>
    <h1>Edit Your Profile</h1>

    {{> error_msg error=error}}

    <section class="profile">
        <form action="/users/{{user._id}}/edit" method="POST" id="edit-profile-form" enctype="multipart/form-data">
            <img src="/users/{{user._id}}/picture" alt="{{#if (equals user.picture " /public/img/defaultPfp.jpeg")}}No
                profile picture{{else}}{{user.username}}'s profile picture{{/if}}" class="profile-picture">

            <label for="bio">Bio:
                <textarea id="bio" name="bio">{{user.bio}}</textarea>
            </label>

            <label for="instruments">Instruments (comma separated):
                <input type="text" id="instruments" name="instruments"
                    value="{{#each user.instruments}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}" multiple>
            </label>

            <label for="genres">Genres (comma separated):
                <input type="text" id="genres" name="genres"
                    value="{{#each user.genres}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}" multiple>
            </label>

            <label for="profilePicture">Profile Picture:
                <input type="file" id="profilePicture" name="profilePicture">
            </label>

            {{#unless (equals user.picture defaultPic)}}
            <label for="deletePicture">Delete Profile Picture
                <input type="checkbox" name="deletePicture" id="deletePicture" value="true">
            </label>
            {{/unless}}

            <h2>Change Password</h2>

            <div class="error-message"></div>

            <label for="currentPassword"> Current Password:
                <input type="password" id="currentPassword" name="currentPassword">
                <input type="checkbox" id="toggleCurrentPassword"> Show Password
            </label>
            <label for="newPassword">New Password:
                <p>Passwords must contain at least: 1 Capital Letter, 1 Symbol, and 1 Number</p> 
                <input type="password" id="newPassword" name="newPassword">
                <input type="checkbox" id="toggleNewPassword"> Show Password
            </label>
            <label for="confirmPassword">Confirm New Password:
                <input type="password" id="confirmNewPassword" name="confirmPassword">
                <input type="checkbox" id="toggleConfirmNewPassword"> Show Password
            </label>



            <input type="submit" value="Save Changes" id="edit_profile_button">
        </form>

        <p><strong>Bio:</strong> {{user.bio}}</p>
        <p><strong>Instruments:</strong> {{#each user.instruments}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}</p>
        <p><strong>Genres:</strong> {{#each user.genres}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}</p>
    </section>
</main>